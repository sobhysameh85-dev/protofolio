<!DOCTYPE html>
<html lang="ar">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¹Ù„ÙˆÙ…</title>

    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/all.min.css">
    <link rel="stylesheet" href="./style.css">
    <script src="./js/bootstrap.bundle.min.js"></script>
</head>

<body class="p-4">

    <section class="hero text-center text-white d-flex align-items-center">
        <div class="container">
            <h1 class="display-5 fw-bold">Ù…Ù†ØµØ© ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø¹Ù„ÙˆÙ…</h1>
            <p class="lead">Ø§Ø®ØªØ± Ù…Ø±Ø­Ù„ØªÙƒ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© ÙˆØ§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</p>
        </div>
    </section>

    <h2 class="mt-4 mb-4">Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</h2>

    <div id="cards" class="row"></div>

    <script>
        const container = document.getElementById("cards");
        const params = new URLSearchParams(window.location.search);
        const isAdmin = params.get("admin") === "123";

        // ğŸ”¥ Ø§Ø³Ù… Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
        const pageName = window.location.pathname.split("/").pop().replace(".html", "");
        const storageKey = pageName + "Cards";

        // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© ÙÙ‚Ø·
        let cards = JSON.parse(localStorage.getItem(storageKey)) || [];

        function renderCards() {

            container.innerHTML = "";

            if (cards.length === 0) {
                container.innerHTML = `
                    <div class="col-12 text-center">
                        <p class="text-muted">Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø¨Ø¹Ø¯</p>
                    </div>
                `;
                return;
            }

            cards.forEach((card, index) => {
                container.innerHTML += `
                    <div class="col-md-4 mb-3">
                        <div class="card p-3 shadow-sm">
                            <h5>${card.title}</h5>
                            <a href="${card.link}" target="_blank" class="btn btn-success mb-2 w-100">
                                ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø·
                            </a>

                            ${isAdmin ? `
                                <button class="btn btn-warning btn-sm mb-1 w-100" onclick="editCard(${index})">
                                    ØªØ¹Ø¯ÙŠÙ„
                                </button>
                                <button class="btn btn-danger btn-sm w-100" onclick="deleteCard(${index})">
                                    Ø­Ø°Ù
                                </button>
                            ` : ""}
                        </div>
                    </div>
                `;
            });
        }

        function deleteCard(index) {
            if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ")) {
                cards.splice(index, 1);
                localStorage.setItem(storageKey, JSON.stringify(cards));
                renderCards();
            }
        }

        function editCard(index) {
            const newTitle = prompt("Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯:", cards[index].title);
            const newLink = prompt("Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¬Ø¯ÙŠØ¯:", cards[index].link);

            if (newTitle && newLink) {
                cards[index] = { title: newTitle, link: newLink };
                localStorage.setItem(storageKey, JSON.stringify(cards));
                renderCards();
            }
        }

        renderCards();
    </script>

</body>
</html>