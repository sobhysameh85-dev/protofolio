<!DOCTYPE html>
<html lang="ar">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>plus</title>
    <link rel="stylesheet" href="./css/bootstrap.min.css">
</head>

<body class="p-4">

    <h3>Ø§Ø®ØªØ± Ø§Ù„ØµÙ</h3>

    <label class="me-3">
        <input type="radio" name="grade" value="ola"> Ø§ÙˆÙ„Ù‰
    </label>

    <label class="me-3">
        <input type="radio" name="grade" value="tanya"> Ø«Ø§Ù†ÙŠÙ‡
    </label>

    <label class="me-3">
        <input type="radio" name="grade" value="talta"> Ø«Ø§Ù„Ø«Ù‡
    </label>

    <label class="me-3">
        <input type="radio" name="grade" value="rabaa"> Ø±Ø§Ø¨Ø¹Ù‡
    </label>

    <!-- âœ… Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³ -->
    <label class="me-3">
        <input type="radio" name="grade" value="khamsa"> Ø®Ø§Ù…Ø³Ù‡
    </label>

    <!-- âœ… Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³ -->
    <label class="me-3">
        <input type="radio" name="grade" value="sata"> Ø³Ø§Ø¯Ø³Ù‡
    </label>

    <hr>

    <div class="mb-3">
        <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ø±Ø¯</label>
        <input type="text" id="title" class="form-control">
    </div>

    <div class="mb-3">
        <label>Ø§Ù„Ø±Ø§Ø¨Ø·</label>
        <input type="text" id="link" class="form-control">
    </div>

    <button class="btn btn-primary" onclick="createCard()">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒØ§Ø±Ø¯</button>

    <script>
        async function createCard() {

            const selected = document.querySelector('input[name="grade"]:checked');
            if (!selected) {
                alert("Ø§Ø®ØªØ± Ø§Ù„ØµÙ Ø£ÙˆÙ„Ø§Ù‹");
                return;
            }

            const grade = selected.value;
            const title = document.getElementById("title").value;
            const link = document.getElementById("link").value;

            const token = localStorage.getItem("token");

            await fetch("http://localhost:3000/api/videos", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    Authorization: token
                },
                body: JSON.stringify({ title, link, grade })
            });

            alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ âœ…");

            // ğŸ”¥ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù„ØµÙØ­Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙØ©
            window.location.href = grade + ".html";
        }
    </script>

</body>

</html>