<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>علوم</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/all.min.css">
    <link rel="stylesheet" href="./style.css">
    <script src="./js/bootstrap.bundle.min.js"></script>
</head>

<body class="p-4">
    <section class="hero text-center text-white d-flex align-items-center">
        <div class="container">
            <h1 class="display-5 fw-bold">منصة تعليم العلوم</h1>
            <p class="lead">اختر مرحلتك الدراسية وابدأ رحلتك التعليمية</p>
        </div>
    </section>
    <h1>الفديوهات</h1>



    <div id="cards" class="row"></div>

    <script>
        const container = document.getElementById("cards");
        const params = new URLSearchParams(window.location.search);
        const isAdmin = params.get("admin") === "123";

        // جلب البيانات المخزنة
        let cards = JSON.parse(localStorage.getItem("rabaaCards")) || [];

        // إضافة كارد جديد من الرابط
        const title = params.get("title");
        const link = params.get("link");

        if (title && link) {
            cards.push({ title, link });
            localStorage.setItem("rabaaCards", JSON.stringify(cards));
        }

        // عرض الكروت
        function renderCards() {
            container.innerHTML = "";

            cards.forEach((card, index) => {
                container.innerHTML += `
        <div class="col-md-4 mb-3">
            <div class="card p-3">
                <h5>${card.title}</h5>
                <a href="${card.link}" target="_blank" class="btn btn-success mb-2">
                    فتح الرابط
                </a>

                ${isAdmin ? `
                <button class="btn btn-warning btn-sm mb-1" onclick="editCard(${index})">
                    تعديل
                </button>
                <button class="btn btn-danger btn-sm" onclick="deleteCard(${index})">
                    حذف
                </button>
                ` : ""}

            </div>
        </div>
        `;
            });
        }

        // حذف
        function deleteCard(index) {
            if (confirm("هل أنت متأكد من الحذف؟")) {
                cards.splice(index, 1);
                localStorage.setItem("rabaaCards", JSON.stringify(cards));
                renderCards();
            }
        }

        // تعديل
        function editCard(index) {
            const newTitle = prompt("العنوان الجديد:", cards[index].title);
            const newLink = prompt("الرابط الجديد:", cards[index].link);

            if (newTitle && newLink) {
                cards[index] = { title: newTitle, link: newLink };
                localStorage.setItem("rabaaCards", JSON.stringify(cards));
                renderCards();
            }
        }

        renderCards();
    </script>
</body>

</html>